{"version":3,"sources":["../src/server.ts"],"sourcesContent":["import { cookies } from 'next/headers';\nimport { CookieAttributes, Cookies } from './types';\nimport type { ResponseCookie } from 'next/dist/compiled/@edge-runtime/cookies';\n\nexport const getCookies = (): Cookies => {\n  const org = cookies();\n\n  return {\n    get: (name?: string) =>\n      (name == null\n        ? Object.fromEntries(org.getAll().map((c) => [c.name, c.value]))\n        : org.get(name)?.value) as never,\n\n    set: (name, value, options) => {\n      const pre = org.get(name)?.value;\n      org.set(name, value, options && convertCookieAttributes(options));\n      return pre;\n    },\n\n    remove: (name) => org.delete(name),\n  };\n};\n\nconst convertCookieAttributes = (\n  options: CookieAttributes,\n): Partial<ResponseCookie> => ({\n  expires:\n    typeof options.expires === 'number'\n      ? options.expires * 864e5\n      : options.expires,\n  path: options.path,\n  domain: options.domain,\n  secure: options.secure,\n  sameSite: options.sameSite?.toLowerCase() as\n    | 'strict'\n    | 'lax'\n    | 'none'\n    | undefined,\n});\n"],"mappings":";AAAA,SAAS,eAAe;AAIjB,IAAM,aAAa,MAAe;AACvC,QAAM,MAAM,QAAQ;AAEpB,SAAO;AAAA,IACL,KAAK,CAAC,SACH,QAAQ,OACL,OAAO,YAAY,IAAI,OAAO,EAAE,IAAI,CAAC,MAAM,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC,IAC7D,IAAI,IAAI,IAAI,GAAG;AAAA,IAErB,KAAK,CAAC,MAAM,OAAO,YAAY;AAC7B,YAAM,MAAM,IAAI,IAAI,IAAI,GAAG;AAC3B,UAAI,IAAI,MAAM,OAAO,WAAW,wBAAwB,OAAO,CAAC;AAChE,aAAO;AAAA,IACT;AAAA,IAEA,QAAQ,CAAC,SAAS,IAAI,OAAO,IAAI;AAAA,EACnC;AACF;AAEA,IAAM,0BAA0B,CAC9B,aAC6B;AAAA,EAC7B,SACE,OAAO,QAAQ,YAAY,WACvB,QAAQ,UAAU,QAClB,QAAQ;AAAA,EACd,MAAM,QAAQ;AAAA,EACd,QAAQ,QAAQ;AAAA,EAChB,QAAQ,QAAQ;AAAA,EAChB,UAAU,QAAQ,UAAU,YAAY;AAK1C;","names":[]}